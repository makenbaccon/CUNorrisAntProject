<html>
<head>
<title>Most_Efficient_Model</title>
<style type="text/css">
<!--
  :link { color: rgb(110, 0, 110); } 
  :visited { color: rgb(110, 0, 110); } 
  body { margin-left: 5px; font-family: arial, sans-serif; 
         background: white; font-size: 12pt } 
  h2 { background: rgb(166,172,255); 
       font-size: 15pt; 
       padding-left: 6px; padding-right: 6px; padding-top: 6px; 
       padding-bottom: 6px; } 
  p { margin-left: 10px; } 
  pre { margin-left: 13px; background: rgb(225,225,225); 
        font-family: monospace; padding-left: 3px; padding-right: 3px; 
        padding-top: 3px; padding-bottom: 3px; } 
-->
</style>
</head>
<body>

<p>This page was automatically generated by NetLogo 4.1.1.</p>

<p>The applet requires Java 5 or higher.
Java must be enabled in your browser settings.
Mac users must have Mac OS X 10.4 or higher.
Windows and Linux users may obtain the latest Java from
<a href="http://java.sun.com/getjava/download.html">Sun's Java site</a>.</p>

<p><hr>

<p><font size="-1">In order for this to work, this file, your model file
(Most_Efficient_Model.nlogo), and the file NetLogoLite.jar
must all be in the same directory.  (You can copy NetLogoLite.jar
from the directory where you installed NetLogo.)</font></p>

<p><font size="-1">On some systems, you can test the applet locally on your computer
before uploading it to a web server.  It doesn't work on all systems,
though, so if it doesn't work from your hard drive, please try
uploading it to a web server.</font></p>

<p><font size="-1">You don't need to include everything in this file in your page.
If you want, you can just take the HTML code beginning with
&lt;applet&gt; and ending with &lt;/applet&gt;, and paste it into any HTML
file you want.  It's even OK to put multiple &lt;applet&gt; tags
on a single page.</font></p>

<p><font size="-1">If NetLogoLite.jar and your model are in different
directories, you must modify the archive= and value= lines
in the HTML code to point to their actual locations.
(For example, if you have multiple applets in different
directories on the same web server, you may want to put 
a single copy of NetLogoLite.jar in one central place and
change the archive= lines of all the HTML files to point
to that one central copy.  This will save disk space for
you and download time for your users.)</font></p>

<p>
<applet code="org.nlogo.lite.Applet"
        archive="NetLogoLite.jar"
        width="1417" height="932">
  <param name="DefaultModel"
         value="Most_Efficient_Model.nlogo">
</applet>
</p>

<p>powered by
<a target="_blank" href="http://ccl.northwestern.edu/netlogo/">NetLogo</a></p>

<p>view/download model file:
<a href="Most_Efficient_Model.nlogo">Most_Efficient_Model.nlogo</a>
</p>
<h2>WHAT IS IT?</h2>
<p>This is an extension of &quot;Ants&quot;, a model included in the default model library of NetLogo. In this project, a colony of ants forages for food. Though each ant follows a set of simple rules, the colony as a whole acts in a sophisticated way.</p><br>
<h2>AUTHORSHIP</h2>
<p>The original framework was designed by Uri Wilensky (see copyright notice below) with extensions made by Andrew Erickson. Extensions were made in collaboration with the Prof. Adam Norris Ant Seminar Class at University of Colorado at Boulder (APPM 4950, Fall '10). </p><br>
<h2>HOW IT WORKS</h2>
<p>When an ant finds a piece of food, it carries the food back to the nest, dropping a chemical as it moves. When other ants &quot;sniff&quot; the chemical, they follow the chemical toward the food. As more ants carry food to the nest, they reinforce the chemical trail.</p><br>
<h2>HOW TO USE IT</h2>
<p>Click the SETUP button to set up the ant nest (in brown, at center) and three piles of food. Click the GO button to start the simulation. The chemical is shown in a black-to-green-to-white gradient. Play with the user defined variables to find the best colony characteristics.</p><br>
<h2>USER VARIABLES</h2>
<p>If you want to change the number of patroller ants (ants that don't go away), move the POPULATION slider before pressing SETUP. More patrollers means you find food faster but the base level of energy usage costs more. </p>
<p>The EVAPORATION-RATE slider controls the evaporation rate of the chemical. The DIFFUSION-RATE slider controls the diffusion rate of the chemical. </p>
<p>AMOUNT-OF-WIGGLE is a parameter that controls how much the ants divate from a straight path. It randomly chooses a number from a normal distribution and tells the ant to step slightly in that direction. The slider adjusts the standard deviation. If this slider is set to 0, the ants will walk in straight lines. If it is set higher than 100, the ants pretty much act with Brownian motion. Optimal wiggle is about 20.</p>
<p>LoS is an abbreviation for Line of Sight. This parameter tells the ant how far to the left and right it should ‘sniff’. Optimal value is about 40. Anything under 15 and over 150 seems to be dysfunctional.</p>
<p>CHEM-LOW-THRESHOLD tells the ant to ignore scents that are below this threshold. Setting this number to 0 lets the ants smell infinitely small amounts of pheromone. The optimal value for this seems to be dependent on the food source, amount of ants, evaporation-rate and diffusion-rate.</p>
<p>CHEM-UPPER-THRESHOLD tells the ants to ignore the difference in scent for pheromone over this threshold. The optimal value for this seems to be dependent on the food source and the amount of ants.</p>
<p>The two reporter windows below these sliders tell us what area is covered by chemicals. LOW CHEM AREA tells us the amount of area that has more than the lower threshold of chemicals ants can 'smell'. UPPER CHEM AREA tells us the area ants will cover when on a hot trail (what area).  </p>
<p>There is a window that ants foragers use to decide to leave the nest. If the total chemical within a circle of 6 patches from the nest center satisfies the window conditions, ant foragers will leave the nest. LEAVE-(LOW/HIGH)-CHEMICAL adjusts the window. </p>
<p>FORAGER-FLOW is the amount of ant foragers that come out of the nest when the window conditions are met. If there are over 1000 ants, no more will come out. This is to protect the program from having an ant explosion. If you want to change this you can modify the code: <br>  if ;Ticks Mod 10 = 0 and <br>     count turtles &lt; 1000 and <br>     window = 0 and</p>
<p>If an ant does not find food within DEATH-FROM-HUNGER ticks it will die. Another way of thinking of this parameter is that the ants just goes back into the nest and waits for the window conditions to be met again. </p>
<p>RETURN-WIGGLE is a switch that when on lets ants with food wiggle as much as ants without food. When this is switched off, ants returning with food walk in a straight line towards the nest.     </p>
<p>If ADD FOOD WITH CLICK? is on, you can add food with a mouse click, but the program will become very slow. 'Food-per-Energy' won't work if you add food. </p><br>
<h2>PLOTS</h2>
<p>There is a PLOT? switch. If off plotting will be disabled and the model runs faster. </p>
<p>FOOD IN EACH PILE graphs the amount of food in each of the four food piles. The red line is the user added food. </p>
<p>NUMBER OF FORAGERS graphs the amount ant foragers at any one time. </p>
<p>SIGNAL TO LEAVE graphs the amount of chemical within a 6 patch radius of the nest. </p>
<p>ENERGY is the total power throughout time used. See Power below for more details</p>
<p>POWER sums the amount of ants outside the nest adds and the amount of chemical being used. Each of these sums is weighted with the sliders below: ANT-COST and CHEM-COST.  </p>
<p>FOOD-PER-ENERGY is the ratio of food gathered to energy spent. The best ant colonies will maximize this. The reporter window tells us at that particular tick what the food/energy is and the graph below measures it throughout time. </p><br>
<h2>THINGS TO NOTICE</h2>
<p>The ant colony generally exploits the food source in order, starting with the food closest to the nest, and finishing with the food most distant from the nest. It is more difficult for the ants to form a stable trail to the more distant food, since the chemical trail has more time to evaporate and diffuse before being reinforced.</p>
<p>Once the colony finishes collecting the closest food, the chemical trail to that food naturally disappears, freeing up ants to help collect the other food sources. The more distant food sources require a larger &quot;critical number&quot; of ants to form a stable trail.</p>
<p>The consumption of the food is shown in a plot.  The line colors in the plot match the colors of the food piles.</p><br>
<h2>EXTENDING THE MODEL</h2>
<p>Try different placements for the food sources. What happens if two food sources are equidistant from the nest? When that happens in the real world, ant colonies typically exploit one source then the other (not at the same time).</p>
<p>In this project, the ants use a &quot;trick&quot; to find their way back to the nest: they follow the &quot;nest scent.&quot; Real ants use a variety of different approaches to find their way back to the nest. Try to implement some alternative strategies.</p><br>
<h2>ORIGINAL COPYRIGHT NOTICE</h2>
<p>Copyright 1997 Uri Wilensky. All rights reserved.</p>
<p>Permission to use, modify or redistribute this model is hereby granted, provided that both of the following requirements are followed:<br>a) this copyright notice is included.<br>b) this model will not be redistributed for profit without permission from Uri Wilensky. Contact Uri Wilensky for appropriate licenses for redistribution for profit.</p>
<p>This model was created as part of the project: CONNECTED MATHEMATICS: MAKING SENSE OF COMPLEX PHENOMENA THROUGH BUILDING OBJECT-BASED PARALLEL MODELS (OBPML).  The project gratefully acknowledges the support of the National Science Foundation (Applications of Advanced Technologies Program) -- grant numbers RED #9552950 and REC #9632612.</p>
<p>This model was developed at the MIT Media Lab using CM StarLogo.  See Resnick, M. (1994) &quot;Turtles, Termites and Traffic Jams: Explorations in Massively Parallel Microworlds.&quot;  Cambridge, MA: MIT Press.  Adapted to StarLogoT, 1997, as part of the Connected Mathematics Project.</p>
<p>This model was converted to NetLogo as part of the projects: PARTICIPATORY SIMULATIONS: NETWORK-BASED DESIGN FOR SYSTEMS LEARNING IN CLASSROOMS and/or INTEGRATED SIMULATION AND MODELING ENVIRONMENT. The project gratefully acknowledges the support of the National Science Foundation (REPP &amp; ROLE programs) -- grant numbers REC #9814682 and REC-0126227. Converted from StarLogoT to NetLogo, 1998.</p><br>
<h2>PROCEDURES</h2>
<pre><font color="#007f69">Globals</font><font color="#000000"> [
  power       </font><font color="#5a5a5a">;; amount of resources the colony is using</font><font color="#000000">
  energy      </font><font color="#5a5a5a">;; total amount of power the colony has spent throughout time</font><font color="#000000">
  inital-food </font><font color="#5a5a5a">;; amount of food at time = o</font><font color="#000000">
  food-per-energy </font><font color="#5a5a5a">;; ratio of amount food collected compared to energy spent</font><font color="#000000">
  Leave       </font><font color="#5a5a5a">;; amount of chemical near nest</font><font color="#000000">
  window      </font><font color="#5a5a5a">;; tells us whether the nest chemical amount is going up or down</font><font color="#000000">
]  

</font><font color="#007f69">patches-own</font><font color="#000000"> [
  chemical             </font><font color="#5a5a5a">;; amount of chemical on this patch</font><font color="#000000">
  ground               </font><font color="#5a5a5a">;; color of ground</font><font color="#000000">
  food                 </font><font color="#5a5a5a">;; amount of food on this patch (1 or 2)</font><font color="#000000">
  nest?                </font><font color="#5a5a5a">;; true on nest patches, false elsewhere</font><font color="#000000">
  nest-scent           </font><font color="#5a5a5a">;; number that is higher closer to the nest</font><font color="#000000">
  food-source-number   </font><font color="#5a5a5a">;; number (1, 2, 3, or 4) to identify the food sources</font><font color="#000000">

]

</font><font color="#007f69">Turtles-own</font><font color="#000000"> [ 
  hungry               </font><font color="#5a5a5a">;; counts how long it has been since last food encounter</font><font color="#000000">
]
  
</font><font color="#5a5a5a">;; Create different types of ants</font><font color="#000000">
</font><font color="#660096">Breed</font><font color="#000000"> [ patroller ] 
</font><font color="#660096">Breed</font><font color="#000000"> [ forager ]
</font><font color="#5a5a5a">;;Breed [ midden ]</font><font color="#000000">
</font><font color="#5a5a5a">;;Breed [ warrior ]</font><font color="#000000">


</font><font color="#5a5a5a">;;;;;;;;;;;;;;;;;;;;;;;;</font><font color="#000000">
</font><font color="#5a5a5a">;;; Setup procedures ;;;</font><font color="#000000">
</font><font color="#5a5a5a">;;;;;;;;;;;;;;;;;;;;;;;;</font><font color="#000000">


</font><font color="#007f69">to</font><font color="#000000"> setup
  </font><font color="#0000aa">clear-all</font><font color="#000000">
  </font><font color="#0000aa">set-default-shape</font><font color="#000000"> </font><font color="#660096">turtles</font><font color="#000000"> </font><font color="#963700">&quot;ant&quot;</font><font color="#000000">  </font><font color="#5a5a5a">;; makes them look like ants</font><font color="#000000">
  </font><font color="#5a5a5a">;;resize-world -80 80 -80 80</font><font color="#000000">
  </font><font color="#0000aa">resize-world</font><font color="#000000"> </font><font color="#963700">-60</font><font color="#000000"> </font><font color="#963700">60</font><font color="#000000"> </font><font color="#963700">-60</font><font color="#000000"> </font><font color="#963700">60</font><font color="#000000">
  create-patroller population
  [ </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">size</font><font color="#000000"> </font><font color="#963700">3</font><font color="#000000">         </font><font color="#5a5a5a">;; easier to see</font><font color="#000000">
    </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">red</font><font color="#000000">      </font><font color="#5a5a5a">;; red = not carrying food</font><font color="#000000">
    </font><font color="#0000aa">fd</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000"> ]
  setup-patches
  do-plotting
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">to</font><font color="#000000"> setup-patches
  </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000">
  [ setup-nest
    create-food
    </font><font color="#5a5a5a">;Obstacles </font><font color="#000000">
    recolor-patch
    </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">65</font><font color="#000000"> 
]
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">to</font><font color="#000000"> setup-nest  </font><font color="#5a5a5a">;; patch procedure</font><font color="#000000">
  </font><font color="#5a5a5a">;; set nest? variable to true inside the nest, false elsewhere</font><font color="#000000">
  </font><font color="#0000aa">set</font><font color="#000000"> nest? (</font><font color="#660096">distancexy</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">) </font><font color="#660096">&lt;</font><font color="#000000"> </font><font color="#963700">4</font><font color="#000000">
  </font><font color="#5a5a5a">;; spread a nest-scent over the whole world -- stronger near the nest</font><font color="#000000">
  </font><font color="#0000aa">set</font><font color="#000000"> nest-scent </font><font color="#963700">200</font><font color="#000000"> </font><font color="#660096">-</font><font color="#000000"> </font><font color="#660096">distancexy</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">to</font><font color="#000000"> create-food
  </font><font color="#0000aa">if</font><font color="#000000"> (</font><font color="#660096">distancexy</font><font color="#000000"> </font><font color="#660096">random-xcor</font><font color="#000000"> </font><font color="#660096">random-ycor</font><font color="#000000">) </font><font color="#660096">&lt;</font><font color="#000000"> </font><font color="#963700">10</font><font color="#000000">
    [ </font><font color="#0000aa">set</font><font color="#000000"> food-source-number </font><font color="#963700">1</font><font color="#000000"> ]
    </font><font color="#5a5a5a">;; setup food source two on the lower-left</font><font color="#000000">
</font><font color="#5a5a5a">;    if (distancexy (-0.8 * max-pxcor) (-0.6 * max-pycor)) &lt; 6</font><font color="#000000">
</font><font color="#5a5a5a">;    [ set food-source-number 2 ]</font><font color="#000000">
</font><font color="#5a5a5a">;    ;; setup food source three on the upper-left</font><font color="#000000">
</font><font color="#5a5a5a">;    if (distancexy (-0.6 * max-pxcor) (0.7 * max-pycor)) &lt; 6</font><font color="#000000">
</font><font color="#5a5a5a">;    [ set food-source-number 3 ]</font><font color="#000000">
</font><font color="#5a5a5a">;    ;; set &quot;food&quot; at sources to either 1 or 2, randomly</font><font color="#000000">
    </font><font color="#0000aa">if</font><font color="#000000"> food-source-number </font><font color="#660096">&gt;</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">
   [ </font><font color="#0000aa">set</font><font color="#000000"> food </font><font color="#963700">2</font><font color="#000000"> ]
</font><font color="#007f69">end</font><font color="#000000">


</font><font color="#007f69">to</font><font color="#000000"> recolor-patch  </font><font color="#5a5a5a">;; patch procedure</font><font color="#000000">
  </font><font color="#5a5a5a">;; give color to nest and food sources</font><font color="#000000">
  </font><font color="#0000aa">ifelse</font><font color="#000000"> nest?
  [ </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">brown</font><font color="#000000"> ]    </font><font color="#5a5a5a">;; Color the nest Brown</font><font color="#000000">
  [ </font><font color="#0000aa">ifelse</font><font color="#000000"> food </font><font color="#660096">&gt;</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">       </font><font color="#5a5a5a">;; Color food</font><font color="#000000">
    [ </font><font color="#0000aa">if</font><font color="#000000"> food-source-number </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> [ </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">cyan</font><font color="#000000"> ] 
      </font><font color="#0000aa">if</font><font color="#000000"> food-source-number </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000"> [ </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">sky</font><font color="#000000">  ]
      </font><font color="#0000aa">if</font><font color="#000000"> food-source-number </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">3</font><font color="#000000"> [ </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">blue</font><font color="#000000"> ] 
      </font><font color="#0000aa">if</font><font color="#000000"> food-source-number </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">4</font><font color="#000000"> [ </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">red</font><font color="#000000">  ] ]
    </font><font color="#5a5a5a">;; scale color to show chemical concentration</font><font color="#000000">
    [ </font><font color="#0000aa">ifelse</font><font color="#000000"> chemical </font><font color="#660096">&lt;=</font><font color="#000000"> Chem-Low-Threshold             
       [ </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">65</font><font color="#000000"> ]
       [ </font><font color="#0000aa">ifelse</font><font color="#000000"> chemical </font><font color="#660096">&gt;=</font><font color="#000000"> Chem-Upper-Threshold
         [ </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">white</font><font color="#000000"> ]
</font><font color="#5a5a5a">;;      if chemical &lt;= Chem-Low-Threshold and chemical &gt;= Chem-Upper-Threshold</font><font color="#000000">
         [ </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#660096">scale-color</font><font color="#000000"> </font><font color="#963700">green</font><font color="#000000"> chemical Chem-Low-Threshold Chem-Upper-Threshold ]
    ] ] ]

</font><font color="#007f69">end</font><font color="#000000">


</font><font color="#5a5a5a">;;;;;;;;;;;;;;;;;;;;;</font><font color="#000000">
</font><font color="#5a5a5a">;;; Go procedures ;;;</font><font color="#000000">
</font><font color="#5a5a5a">;;;;;;;;;;;;;;;;;;;;;</font><font color="#000000">

</font><font color="#007f69">to</font><font color="#000000"> go  </font><font color="#5a5a5a">;; forever button</font><font color="#000000">
  </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">turtles</font><font color="#000000">
  [ </font><font color="#0000aa">ifelse</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">red</font><font color="#000000">
    [ look-for-food  ]       </font><font color="#5a5a5a">;; not carrying food? look for it</font><font color="#000000">
    [ return-to-nest ]       </font><font color="#5a5a5a">;; carrying food? take it back to nest</font><font color="#000000">
    </font><font color="#0000aa">fd</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> 
    add-ants
    kill-ants ]
  </font><font color="#0000aa">diffuse</font><font color="#000000"> chemical (diffusion-rate </font><font color="#660096">/</font><font color="#000000"> </font><font color="#963700">100</font><font color="#000000">)
  </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000">
  [ </font><font color="#0000aa">set</font><font color="#000000"> chemical chemical </font><font color="#660096">*</font><font color="#000000"> (</font><font color="#963700">100</font><font color="#000000"> </font><font color="#660096">-</font><font color="#000000"> evaporation-rate) </font><font color="#660096">/</font><font color="#000000"> </font><font color="#963700">100</font><font color="#000000">  </font><font color="#5a5a5a">;; slowly evaporate chemical</font><font color="#000000">
    recolor-patch 
    </font><font color="#0000aa">if</font><font color="#000000"> add-food-with-click? </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">true</font><font color="#000000"> [add-food]
  ]
  
  measure-system
  </font><font color="#0000aa">tick</font><font color="#000000">
  do-plotting
  </font><font color="#5a5a5a">;;if sum [food] of patches = 0 [Stop]</font><font color="#000000">
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">to</font><font color="#000000"> return-to-nest  </font><font color="#5a5a5a">;; turtle procedure</font><font color="#000000">
  </font><font color="#0000aa">if</font><font color="#000000"> return-wiggle 
  [ wiggle ]
  </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">not</font><font color="#000000"> </font><font color="#660096">can-move?</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> [ </font><font color="#0000aa">rt</font><font color="#000000"> </font><font color="#963700">180</font><font color="#000000"> ]
  </font><font color="#0000aa">ifelse</font><font color="#000000"> nest?
  [ </font><font color="#5a5a5a">;; drop food and head out again</font><font color="#000000">
    </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">red</font><font color="#000000">
    </font><font color="#0000aa">rt</font><font color="#000000"> </font><font color="#963700">180</font><font color="#000000"> ]
  [ </font><font color="#0000aa">If</font><font color="#000000"> </font><font color="#660096">breed</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> patroller 
    [</font><font color="#0000aa">set</font><font color="#000000"> chemical chemical </font><font color="#660096">+</font><font color="#000000"> patchem]  </font><font color="#5a5a5a">;; drop some chemical</font><font color="#000000">
    </font><font color="#0000aa">If</font><font color="#000000"> </font><font color="#660096">breed</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> forager
    [</font><font color="#0000aa">set</font><font color="#000000"> chemical chemical </font><font color="#660096">+</font><font color="#000000"> forgchem]  </font><font color="#5a5a5a">;; drop some chemical</font><font color="#000000">
    uphill-nest-scent ]         </font><font color="#5a5a5a">;; head toward the greatest value of nest-scent</font><font color="#000000">
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">to</font><font color="#000000"> look-for-food  </font><font color="#5a5a5a">;; turtle procedure</font><font color="#000000">
  wiggle
  </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">not</font><font color="#000000"> </font><font color="#660096">can-move?</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> [ </font><font color="#0000aa">rt</font><font color="#000000"> </font><font color="#963700">180</font><font color="#000000"> ]
  </font><font color="#0000aa">if</font><font color="#000000"> food </font><font color="#660096">&gt;</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">
  [ </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">black</font><font color="#000000">          </font><font color="#5a5a5a">;; pick up food</font><font color="#000000">
    </font><font color="#0000aa">set</font><font color="#000000"> food food </font><font color="#660096">-</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">        </font><font color="#5a5a5a">;; and reduce the food source</font><font color="#000000">
    </font><font color="#0000aa">rt</font><font color="#000000"> </font><font color="#963700">180</font><font color="#000000">                   </font><font color="#5a5a5a">;; and turn around</font><font color="#000000">
    </font><font color="#0000aa">stop</font><font color="#000000"> ]
  </font><font color="#5a5a5a">;; go in the direction where the chemical smell is strongest</font><font color="#000000">
  </font><font color="#0000aa">if</font><font color="#000000"> (chemical </font><font color="#660096">&gt;=</font><font color="#000000"> Chem-Low-Threshold) </font><font color="#660096">and</font><font color="#000000"> (chemical </font><font color="#660096">&lt;</font><font color="#000000"> Chem-Upper-Threshold)
  [ uphill-chemical ]
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#5a5a5a">;; sniff forward, left, and right, and go where the strongest smell is</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> uphill-chemical  </font><font color="#5a5a5a">;; turtle procedure</font><font color="#000000">
  </font><font color="#0000aa">let</font><font color="#000000"> scent-ahead chemical-scent-at-angle   </font><font color="#963700">0</font><font color="#000000">
  </font><font color="#0000aa">let</font><font color="#000000"> scent-right chemical-scent-at-angle  </font><font color="#963700">45</font><font color="#000000">
  </font><font color="#0000aa">let</font><font color="#000000"> scent-left  chemical-scent-at-angle  </font><font color="#963700">-45</font><font color="#000000">
  </font><font color="#0000aa">if</font><font color="#000000"> (scent-right </font><font color="#660096">&gt;</font><font color="#000000"> scent-ahead) </font><font color="#660096">or</font><font color="#000000"> (scent-left </font><font color="#660096">&gt;</font><font color="#000000"> scent-ahead)
  [ </font><font color="#0000aa">ifelse</font><font color="#000000"> scent-right </font><font color="#660096">&gt;</font><font color="#000000"> scent-left
    [ </font><font color="#0000aa">rt</font><font color="#000000"> </font><font color="#963700">45</font><font color="#000000"> ]
    [ </font><font color="#0000aa">lt</font><font color="#000000"> </font><font color="#963700">45</font><font color="#000000"> ] ]
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#5a5a5a">;; sniff left and right, and go where the strongest smell is</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> uphill-nest-scent  </font><font color="#5a5a5a">;; turtle procedure</font><font color="#000000">
  </font><font color="#0000aa">let</font><font color="#000000"> scent-ahead nest-scent-at-angle   </font><font color="#963700">0</font><font color="#000000">
  </font><font color="#0000aa">let</font><font color="#000000"> scent-right nest-scent-at-angle  </font><font color="#963700">45</font><font color="#000000">
  </font><font color="#0000aa">let</font><font color="#000000"> scent-left  nest-scent-at-angle  (</font><font color="#963700">45</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> </font><font color="#963700">-1</font><font color="#000000">)
  </font><font color="#0000aa">if</font><font color="#000000"> (scent-right </font><font color="#660096">&gt;</font><font color="#000000"> scent-ahead) </font><font color="#660096">or</font><font color="#000000"> (scent-left </font><font color="#660096">&gt;</font><font color="#000000"> scent-ahead)
  [ </font><font color="#0000aa">ifelse</font><font color="#000000"> scent-right </font><font color="#660096">&gt;</font><font color="#000000"> scent-left
    [ </font><font color="#0000aa">rt</font><font color="#000000"> </font><font color="#963700">45</font><font color="#000000"> ]
    [ </font><font color="#0000aa">lt</font><font color="#000000"> </font><font color="#963700">45</font><font color="#000000"> ] ]
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">to</font><font color="#000000"> wiggle  </font><font color="#5a5a5a">;; turtle procedure</font><font color="#000000">
  </font><font color="#0000aa">rt</font><font color="#000000"> </font><font color="#660096">random-normal</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> amount-of-wiggle
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">to-report</font><font color="#000000"> nest-scent-at-angle [angle]
  </font><font color="#0000aa">let</font><font color="#000000"> p </font><font color="#660096">patch-right-and-ahead</font><font color="#000000"> angle </font><font color="#963700">1</font><font color="#000000">
  </font><font color="#0000aa">if</font><font color="#000000"> p </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">nobody</font><font color="#000000"> [ </font><font color="#0000aa">report</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> ]
  </font><font color="#0000aa">report</font><font color="#000000"> [nest-scent] </font><font color="#660096">of</font><font color="#000000"> p
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">to-report</font><font color="#000000"> chemical-scent-at-angle [angle]
  </font><font color="#0000aa">let</font><font color="#000000"> p </font><font color="#660096">patch-right-and-ahead</font><font color="#000000"> angle </font><font color="#963700">1</font><font color="#000000">
  </font><font color="#0000aa">if</font><font color="#000000"> p </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">nobody</font><font color="#000000"> [ </font><font color="#0000aa">report</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> ]
  </font><font color="#0000aa">report</font><font color="#000000"> [chemical] </font><font color="#660096">of</font><font color="#000000"> p
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">to</font><font color="#000000"> Add-food  </font><font color="#5a5a5a">;; patch procedure</font><font color="#000000">
  </font><font color="#5a5a5a">;; setup food source one on the right</font><font color="#000000">
  
  </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">mouse-down?</font><font color="#000000">
  [ </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patch</font><font color="#000000"> </font><font color="#660096">mouse-xcor</font><font color="#000000"> </font><font color="#660096">mouse-ycor</font><font color="#000000"> 
    [ </font><font color="#0000aa">if</font><font color="#000000"> (</font><font color="#660096">distancexy</font><font color="#000000"> </font><font color="#660096">mouse-xcor</font><font color="#000000"> </font><font color="#660096">mouse-ycor</font><font color="#000000">) </font><font color="#660096">&lt;</font><font color="#000000"> </font><font color="#963700">5</font><font color="#000000">
      [ </font><font color="#0000aa">set</font><font color="#000000"> food-source-number </font><font color="#963700">4</font><font color="#000000">
        </font><font color="#0000aa">set</font><font color="#000000"> food </font><font color="#963700">2</font><font color="#000000"> 
        </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">red</font><font color="#000000"> ] ] ]
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">to</font><font color="#000000"> Add-ants
  </font><font color="#0000aa">if</font><font color="#000000"> (</font><font color="#660096">distancexy</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">) </font><font color="#660096">&lt;</font><font color="#000000"> </font><font color="#963700">6</font><font color="#000000">
      [   </font><font color="#0000aa">set</font><font color="#000000"> Leave (Leave </font><font color="#660096">+</font><font color="#000000"> chemical) </font><font color="#660096">/</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000"> ]
  </font><font color="#0000aa">if</font><font color="#000000"> leave </font><font color="#660096">&lt;</font><font color="#000000"> Leave-low-Threshold [ </font><font color="#0000aa">set</font><font color="#000000"> window </font><font color="#963700">0</font><font color="#000000"> ] 
  </font><font color="#0000aa">if</font><font color="#000000"> leave </font><font color="#660096">&gt;</font><font color="#000000"> Leave-high-Threshold [ </font><font color="#0000aa">set</font><font color="#000000"> window </font><font color="#963700">1</font><font color="#000000"> ] 
  
  </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#5a5a5a">;Ticks Mod 10 = 0 and </font><font color="#000000">
     </font><font color="#660096">count</font><font color="#000000"> </font><font color="#660096">turtles</font><font color="#000000"> </font><font color="#660096">&lt;</font><font color="#000000"> </font><font color="#963700">1000</font><font color="#000000"> </font><font color="#660096">and</font><font color="#000000"> 
     window </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> </font><font color="#660096">and</font><font color="#000000">
     </font><font color="#660096">Who</font><font color="#000000"> </font><font color="#660096">&lt;</font><font color="#000000"> forager-flow   </font><font color="#5a5a5a">;;amount of ants that come out when leave-nest is satisfied</font><font color="#000000">
     [ </font><font color="#0000aa">if</font><font color="#000000"> Leave </font><font color="#660096">&gt;</font><font color="#000000"> Leave-low-Threshold </font><font color="#660096">and</font><font color="#000000"> Leave </font><font color="#660096">&lt;</font><font color="#000000"> Leave-high-Threshold
       [ hatch-forager </font><font color="#963700">1</font><font color="#000000"> 
         [ </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">red</font><font color="#000000"> 
           </font><font color="#0000aa">set</font><font color="#000000"> hungry </font><font color="#963700">0</font><font color="#000000">
           </font><font color="#0000aa">setxy</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> ] ]]
</font><font color="#007f69">end</font><font color="#000000"> 

</font><font color="#007f69">to</font><font color="#000000"> kill-ants
  </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#660096">who</font><font color="#000000"> [ 
    </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">Breed</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> forager
      [ </font><font color="#0000aa">set</font><font color="#000000"> hungry (hungry </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">) 
        </font><font color="#0000aa">if</font><font color="#000000"> hungry </font><font color="#660096">&gt;</font><font color="#000000"> </font><font color="#963700">100</font><font color="#000000"> [</font><font color="#0000aa">die</font><font color="#000000">] ] ]
      </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">black</font><font color="#000000"> [ </font><font color="#0000aa">set</font><font color="#000000"> hungry </font><font color="#963700">0</font><font color="#000000"> ] 
</font><font color="#007f69">end</font><font color="#000000"> 

</font><font color="#007f69">to</font><font color="#000000"> Measure-System
  </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">ticks</font><font color="#000000"> </font><font color="#660096">&lt;</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">
    [ </font><font color="#0000aa">set</font><font color="#000000"> inital-food (</font><font color="#660096">sum</font><font color="#000000"> [food] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000">) ]
  </font><font color="#0000aa">set</font><font color="#000000"> power (</font><font color="#660096">count</font><font color="#000000"> </font><font color="#660096">turtles</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> ant-cost </font><font color="#660096">+</font><font color="#000000"> </font><font color="#660096">count</font><font color="#000000"> </font><font color="#660096">turtles</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [</font><font color="#660096">color</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">black</font><font color="#000000">] </font><font color="#660096">*</font><font color="#000000"> chem-cost )
  </font><font color="#0000aa">set</font><font color="#000000"> energy (energy </font><font color="#660096">+</font><font color="#000000"> power)
  </font><font color="#0000aa">set</font><font color="#000000"> food-per-energy ((inital-food </font><font color="#660096">-</font><font color="#000000"> (</font><font color="#660096">sum</font><font color="#000000"> [food] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000">)) </font><font color="#660096">/</font><font color="#000000"> energy)
</font><font color="#007f69">end</font><font color="#000000">


</font><font color="#5a5a5a">;;;;;;;;;;;;;;;;;;;;;;;;;;;</font><font color="#000000">
</font><font color="#5a5a5a">;;; Plotting procedures ;;;</font><font color="#000000">
</font><font color="#5a5a5a">;;;;;;;;;;;;;;;;;;;;;;;;;;;</font><font color="#000000">

</font><font color="#007f69">to</font><font color="#000000"> do-plotting
  </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">not</font><font color="#000000"> plot? [ </font><font color="#0000aa">stop</font><font color="#000000"> ]
  </font><font color="#0000aa">set-current-plot</font><font color="#000000"> </font><font color="#963700">&quot;Food in each pile&quot;</font><font color="#000000">
  </font><font color="#5a5a5a">;; since the plot? switch can be turned on and off at</font><font color="#000000">
  </font><font color="#5a5a5a">;; any time, we must use PLOTXY to make sure points are</font><font color="#000000">
  </font><font color="#5a5a5a">;; plotted with the proper x coordinates</font><font color="#000000">
  </font><font color="#0000aa">set-current-plot-pen</font><font color="#000000"> </font><font color="#963700">&quot;food-in-pile1&quot;</font><font color="#000000">
  </font><font color="#0000aa">plotxy</font><font color="#000000"> </font><font color="#660096">ticks</font><font color="#000000"> </font><font color="#660096">sum</font><font color="#000000"> [food] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [</font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">cyan</font><font color="#000000">]
  </font><font color="#0000aa">set-current-plot-pen</font><font color="#000000"> </font><font color="#963700">&quot;food-in-pile2&quot;</font><font color="#000000">
  </font><font color="#0000aa">plotxy</font><font color="#000000"> </font><font color="#660096">ticks</font><font color="#000000"> </font><font color="#660096">sum</font><font color="#000000"> [food] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [</font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">sky</font><font color="#000000">]
  </font><font color="#0000aa">set-current-plot-pen</font><font color="#000000"> </font><font color="#963700">&quot;food-in-pile3&quot;</font><font color="#000000">
  </font><font color="#0000aa">plotxy</font><font color="#000000"> </font><font color="#660096">ticks</font><font color="#000000"> </font><font color="#660096">sum</font><font color="#000000"> [food] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [</font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">blue</font><font color="#000000">]
  </font><font color="#0000aa">set-current-plot-pen</font><font color="#000000"> </font><font color="#963700">&quot;food-in-pile4&quot;</font><font color="#000000">
  </font><font color="#0000aa">plotxy</font><font color="#000000"> </font><font color="#660096">ticks</font><font color="#000000"> </font><font color="#660096">sum</font><font color="#000000"> [food] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [</font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">red</font><font color="#000000">]

  </font><font color="#0000aa">set-current-plot</font><font color="#000000"> </font><font color="#963700">&quot;Number of Foragers&quot;</font><font color="#000000">
  </font><font color="#0000aa">set-current-plot-pen</font><font color="#000000"> </font><font color="#963700">&quot;forage&quot;</font><font color="#000000">
  </font><font color="#0000aa">plotxy</font><font color="#000000"> </font><font color="#660096">ticks</font><font color="#000000"> </font><font color="#660096">count</font><font color="#000000"> forager </font><font color="#5a5a5a">;;of turtles with [pcolor = red]</font><font color="#000000">

  </font><font color="#0000aa">set-current-plot</font><font color="#000000"> </font><font color="#963700">&quot;Power&quot;</font><font color="#000000"> </font><font color="#5a5a5a">;; plot energy vs time</font><font color="#000000">
  </font><font color="#0000aa">plotxy</font><font color="#000000"> </font><font color="#660096">ticks</font><font color="#000000"> power
  
  </font><font color="#0000aa">set-current-plot</font><font color="#000000"> </font><font color="#963700">&quot;Signal-to-Leave&quot;</font><font color="#000000">
  </font><font color="#0000aa">plotxy</font><font color="#000000"> </font><font color="#660096">ticks</font><font color="#000000"> Leave  </font><font color="#5a5a5a">;; plot the amount of chemical near nest vs time</font><font color="#000000">

  </font><font color="#0000aa">set-current-plot</font><font color="#000000"> </font><font color="#963700">&quot;Food-per-Energy&quot;</font><font color="#000000">
  </font><font color="#0000aa">plotxy</font><font color="#000000"> </font><font color="#660096">ticks</font><font color="#000000"> Food-per-energy  



</font><font color="#007f69">end</font><font color="#000000">


</font><font color="#5a5a5a">;; Credit to 1997 Uri Wilensky for frame of program</font><font color="#000000">
</font>
</pre>

</body>
</html>
